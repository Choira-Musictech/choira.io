{"ast":null,"code":"var _jsxFileName = \"E:\\\\ui\\\\src\\\\pages\\\\customerExplore\\\\Waveform.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport iconBox from \"../../assets/explore/playButton.png\";\nimport iconPauseBox from \"../../assets/explore/pause.png\";\nimport trackImage from \"../../assets/explore/trackImage.png\";\n// import trackImage from \"../../assets/explore/trackImage.png\"\nimport './woveStyles.scss';\nimport { docServerUrl } from '../../restservice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formWaveSurferOptions = ref => ({\n  container: ref,\n  waveColor: \"#f0f0f0\",\n  progressColor: \"#fcfbfb\",\n  cursorColor: \"#4e4e50\",\n  barWidth: 2,\n  barRadius: 1,\n  responsive: true,\n  height: 20,\n  // If true, normalize by the maximum peak instead of 1.0.\n  normalize: true,\n  // Use the PeakCache to improve rendering speed of large waveforms.\n  partialRender: true,\n  xhr: {\n    cache: \"default\",\n    mode: \"cors\",\n    method: \"GET\",\n    credentials: \"include\",\n    headers: [{\n      key: \"cache-control\",\n      value: \"no-cache\"\n    }, {\n      key: \"pragma\",\n      value: \"no-cache\"\n    }]\n  }\n});\nlet oldtrackid = null;\nlet oldplayingAudio = null;\nexport default function Waveform({\n  url,\n  url1,\n  tracks,\n  id,\n  setSelectedPlayButton,\n  selectedPlayButton\n}) {\n  _s();\n  const waveformRef = useRef(null);\n  // const wavesurfer = useRef(null);\n  var wavesurfer = [];\n  // var playingAudio = []\n  const [waveform, setWaveform] = useState(null);\n  const [playing, setPlay] = useState(false);\n  const [openSoundPlay, setSoundPlay] = useState(false);\n  const [playingAudio, setPlayingAudio] = useState(0);\n  const [audioContext, setAudioContext] = useState(new AudioContext());\n  const docServer = docServerUrl;\n  var wave = 'waveform';\n  // create new WaveSurfer instance\n  // On component mount and when url changes\n  useEffect(() => {\n    setPlay(false);\n    if (waveformRef.current) {\n      wavesurfer[id] = WaveSurfer.create({\n        // audioContext: audioContext,\n        container: waveformRef.current,\n        waveColor: \"#f0f0f0\",\n        progressColor: \"#fcc12e\",\n        cursorColor: \"#f0f0f0\",\n        barWidth: 0,\n        barRadius: 1,\n        responsive: true,\n        hideScrollbar: true,\n        height: 20,\n        normalize: true,\n        partialRender: true,\n        pixelRatio: window.devicePixelRatio = 1\n      });\n\n      // wavesurfer[id].on('finish', handlePlayPause)\n      wavesurfer[id].load(url);\n      setWaveform(wavesurfer[id]);\n    }\n    return () => wavesurfer[id].destroy();\n  }, [url]);\n  const handlePlayPause = () => {\n    if (oldtrackid === null) {\n      waveform.play();\n      setPlay(true);\n    } else if (oldtrackid !== waveform) {\n      if (oldtrackid.backend !== null) {\n        oldtrackid.stop();\n      }\n      waveform.play();\n      setPlay(true);\n    } else if (oldtrackid === waveform) {\n      oldtrackid.stop();\n      setPlay(false);\n      if (playing) {\n        setPlay(false);\n      } else {\n        waveform.play();\n        setPlay(true);\n      }\n    } else {\n      waveform.play();\n    }\n    oldtrackid = waveform;\n    setSelectedPlayButton(tracks.name);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"songTracks\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [url1 ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: url1,\n        alt: \"trackI1mg\",\n        width: \"57px\",\n        className: \"trackImg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        src: trackImage,\n        alt: \"trackImg\",\n        width: \"57px\",\n        className: \"trackImg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handlePlayPause,\n        className: \"play\",\n        children: selectedPlayButton == tracks.name && playing ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: iconPauseBox,\n          alt: \"icon\",\n          width: \"20px\",\n          className: \"upImage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: iconBox,\n          alt: \"icon\",\n          className: \"upImage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trackDetail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trackName\",\n        children: tracks.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trackComposer\",\n        children: [tracks.composer, \",\", tracks.genre]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: wave + id,\n      ref: waveformRef,\n      style: {\n        zIndex: '0'\n      },\n      className: \"wavehiden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n_s(Waveform, \"lOraQNrx6aMOyLT+irKXBOlrdR4=\");\n_c = Waveform;\nvar _c;\n$RefreshReg$(_c, \"Waveform\");","map":{"version":3,"names":["React","useEffect","useRef","useState","WaveSurfer","iconBox","iconPauseBox","trackImage","docServerUrl","jsxDEV","_jsxDEV","formWaveSurferOptions","ref","container","waveColor","progressColor","cursorColor","barWidth","barRadius","responsive","height","normalize","partialRender","xhr","cache","mode","method","credentials","headers","key","value","oldtrackid","oldplayingAudio","Waveform","url","url1","tracks","id","setSelectedPlayButton","selectedPlayButton","_s","waveformRef","wavesurfer","waveform","setWaveform","playing","setPlay","openSoundPlay","setSoundPlay","playingAudio","setPlayingAudio","audioContext","setAudioContext","AudioContext","docServer","wave","current","create","hideScrollbar","pixelRatio","window","devicePixelRatio","load","destroy","handlePlayPause","play","backend","stop","name","className","children","src","alt","width","fileName","_jsxFileName","lineNumber","columnNumber","onClick","composer","genre","style","zIndex","_c","$RefreshReg$"],"sources":["E:/ui/src/pages/customerExplore/Waveform.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nimport WaveSurfer from \"wavesurfer.js\";\nimport iconBox from \"../../assets/explore/playButton.png\"\nimport iconPauseBox from \"../../assets/explore/pause.png\"\nimport trackImage from \"../../assets/explore/trackImage.png\"\n// import trackImage from \"../../assets/explore/trackImage.png\"\nimport './woveStyles.scss';\nimport { docServerUrl } from '../../restservice'\n\nconst formWaveSurferOptions = ref => ({\n    container: ref,\n    waveColor: \"#f0f0f0\",\n    progressColor: \"#fcfbfb\",\n    cursorColor: \"#4e4e50\",\n    barWidth: 2,\n    barRadius: 1,\n    responsive: true,\n    height: 20,\n    // If true, normalize by the maximum peak instead of 1.0.\n    normalize: true,\n    // Use the PeakCache to improve rendering speed of large waveforms.\n    partialRender: true,\n    xhr: {\n        cache: \"default\",\n        mode: \"cors\",\n        method: \"GET\",\n        credentials: \"include\",\n        headers: [\n            { key: \"cache-control\", value: \"no-cache\" },\n            { key: \"pragma\", value: \"no-cache\" }\n        ]\n    }\n});\nlet oldtrackid = null;\nlet oldplayingAudio = null;\nexport default function Waveform({ url, url1, tracks, id, setSelectedPlayButton, selectedPlayButton }) {\n    const waveformRef = useRef(null);\n    // const wavesurfer = useRef(null);\n    var wavesurfer = [];\n    // var playingAudio = []\n    const [waveform, setWaveform] = useState(null)\n    const [playing, setPlay] = useState(false);\n    const [openSoundPlay, setSoundPlay] = useState(false)\n    const [playingAudio, setPlayingAudio] = useState(0)\n    const [audioContext, setAudioContext] = useState(new AudioContext())\n\n    const docServer = docServerUrl\n\n    var wave = 'waveform';\n    // create new WaveSurfer instance\n    // On component mount and when url changes\n    useEffect(() => {\n        setPlay(false);\n        if (waveformRef.current) {\n            wavesurfer[id] = WaveSurfer.create({\n                // audioContext: audioContext,\n                container: waveformRef.current,\n                waveColor: \"#f0f0f0\",\n                progressColor: \"#fcc12e\",\n                cursorColor: \"#f0f0f0\",\n                barWidth: 0,\n                barRadius: 1,\n                responsive: true,\n                hideScrollbar: true,\n                height: 20,\n                normalize: true,\n                partialRender: true,\n                pixelRatio: window.devicePixelRatio = 1,\n\n            });\n\n            // wavesurfer[id].on('finish', handlePlayPause)\n            wavesurfer[id].load(url)\n            setWaveform(wavesurfer[id])\n        }\n\n        return () => wavesurfer[id].destroy();\n        \n    }, [url]);\n\n\n\n    const handlePlayPause = () => {\n\n        if (oldtrackid === null) {\n            waveform.play();\n            setPlay(true);\n        } else if (oldtrackid !== waveform) {\n            if (oldtrackid.backend !== null) {\n                oldtrackid.stop();\n            }\n            waveform.play();\n            setPlay(true);\n        } else if (oldtrackid === waveform) {\n            oldtrackid.stop();\n            setPlay(false);\n            if (playing) {\n                setPlay(false);\n            } else {\n                waveform.play();\n                setPlay(true);\n            }\n        } else {\n            waveform.play();\n        }\n\n        oldtrackid = waveform;\n        setSelectedPlayButton(tracks.name)\n    };\n\n    return (\n        <div className=\"songTracks\" >\n\n            <div className=\"controls\">\n                {url1 ?\n                    <img src={url1} alt=\"trackI1mg\" width=\"57px\" className=\"trackImg\" />\n                    :\n                    <img src={trackImage} alt=\"trackImg\" width=\"57px\" className=\"trackImg\" />\n                }\n\n                <div onClick={handlePlayPause} className=\"play\">\n                    {selectedPlayButton == tracks.name && playing ?\n                        <img src={iconPauseBox} alt=\"icon\" width=\"20px\" className='upImage' />\n                        :\n                        <img src={iconBox} alt=\"icon\" className='upImage' />\n                    }\n                </div>\n            </div>\n            <div className=\"trackDetail\" >\n                <div className=\"trackName\">{tracks.name}</div>\n                <div className=\"trackComposer\">{tracks.composer},{tracks.genre}</div>\n            </div>\n            <div id={wave + id} ref={waveformRef} style={{ zIndex: '0' }} className=\"wavehiden\" />\n        </div>\n\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}